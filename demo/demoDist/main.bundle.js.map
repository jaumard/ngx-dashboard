{"version":3,"sources":["webpack:///../src/components/dashboard/dashboard.component.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/index.ts","webpack:///./src/environments/environment.ts","webpack:///./src/polyfills.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/my-widget/my-widget.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/my-widget/my-widget.component.html","webpack:///../src/components/index.ts","webpack:///../src/components/widget/widget.component.ts","webpack:///../src/directives/widget-handle.directive.ts","webpack:///../src/index.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/my-widget/my-widget.component.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import {\r\n  AfterViewInit,\r\n  Component,\r\n  ComponentFactoryResolver,\r\n  ComponentRef,\r\n  ContentChildren,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  Output,\r\n  QueryList,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  Type,\r\n  ViewChild,\r\n  ViewContainerRef\r\n} from \"@angular/core\";\r\nimport {WidgetComponent} from \"../widget/widget.component\";\r\n\r\n@Component({\r\n  selector: 'dashboard',\r\n  template: '<div #target><ng-content></ng-content></div>',\r\n  host: {\r\n    '(window:resize)': '_onResize($event)',\r\n    '(document:mousemove)': '_onMouseMove($event)',\r\n    '(document:mouseup)': '_onMouseUp($event)',\r\n    '(document:touchmove)': '_onMouseMove($event)',\r\n    '(document:touchend)': '_onMouseUp($event)',\r\n    '(document:touchcancel)': '_onMouseUp($event)',\r\n    '(document:scroll)': '_onScroll($event)'\r\n  },\r\n  styles: [`\r\n    :host {\r\n      position: relative;\r\n      display: block;\r\n    }\r\n\r\n    :host /deep/ .widget {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      -webkit-touch-callout: none; /* iOS Safari */\r\n      -webkit-user-select: none; /* Chrome/Safari/Opera */\r\n      -khtml-user-select: none; /* Konqueror */\r\n      -moz-user-select: none; /* Firefox */\r\n      -ms-user-select: none; /* Internet Explorer/Edge */\r\n      user-select: none;\r\n      /* Non-prefixed version, currently\r\n                             not supported by any browser */\r\n    }\r\n\r\n    :host /deep/ .widget.animate {\r\n      -webkit-transition: all 300ms ease-out;\r\n      -moz-transition: all 300ms ease-out;\r\n      -o-transition: all 300ms ease-out;\r\n      transition: all 300ms ease-out;\r\n    }\r\n\r\n    :host /deep/ .widget.active {\r\n      z-index: 100000;\r\n    }`\r\n  ]\r\n})\r\nexport class DashboardComponent implements AfterViewInit, OnChanges {\r\n  //  Event Emitters\r\n  @Output() public onDragStart: EventEmitter<WidgetComponent> = new EventEmitter<WidgetComponent>();\r\n  @Output() public onDrag: EventEmitter<WidgetComponent> = new EventEmitter<WidgetComponent>();\r\n  @Output() public onDragEnd: EventEmitter<WidgetComponent> = new EventEmitter<WidgetComponent>();\r\n  @Output() public onOrderChange: EventEmitter<Array<string>> = new EventEmitter<Array<string>>();\r\n\r\n  @Input() margin: number = 10;\r\n  @Input() widgetsSize: number[] = [150, 150];\r\n  @Input() THRESHOLD: number = 10;\r\n\r\n  //    Public variables\r\n  public dragEnable: boolean = true;\r\n  @ViewChild('target', {read: ViewContainerRef}) private _viewCntRef: ViewContainerRef;\r\n\r\n  //    Private variables\r\n  static SCROLL_STEP: number = 15;\r\n  static SCROLL_DELAY: number = 100;\r\n  private _width: number = 0;\r\n  private _nbColumn: number = 0;\r\n  private _previousPosition: any = {top: 0, left: 0};\r\n  private _isDragging: boolean = false;\r\n  private _lastOrder: Array<string> = [];\r\n  private _currentElement: WidgetComponent;\r\n  private _elements: ComponentRef<WidgetComponent>[] = [];\r\n  private _offset: any;\r\n  private _scrollChange: number = 0;\r\n  private _isScrolling: boolean = false;\r\n  private _currentMouseEvent: any;\r\n\r\n  @ContentChildren(WidgetComponent) private _items: QueryList<WidgetComponent>;\r\n\r\n  constructor(private _componentFactoryResolver: ComponentFactoryResolver,\r\n              private _ngEl: ElementRef,\r\n              private _renderer: Renderer2) {\r\n\r\n  }\r\n\r\n  get width() {\r\n    return this._ngEl.nativeElement.offsetWidth;\r\n  }\r\n\r\n  get height() {\r\n    return this._ngEl.nativeElement.offsetHeight;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // changes.prop contains the old and the new value...\r\n    this._calculSizeAndColumn();\r\n    this._calculPositions();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this._items.forEach(item => {\r\n      item.setEventListener(this._onMouseDown.bind(this));\r\n      //this is an ugly ugly ugly hack :( but needed in order to make static and dynamic widget works together\r\n      //FIXME find a way to retrieve a ComponentRef from static widgets instead of this fake one\r\n      this._elements.push({\r\n        instance: item,\r\n        componentType: null,\r\n        location: null,\r\n        injector: null,\r\n        hostView: null,\r\n        destroy: null,\r\n        onDestroy: null,\r\n        changeDetectorRef: null\r\n      });\r\n    });\r\n    this._calculSizeAndColumn();\r\n    this._offset = {\r\n      top: this._ngEl.nativeElement.offsetY || this._ngEl.nativeElement.offsetTop,\r\n      left: this._ngEl.nativeElement.offsetX || this._ngEl.nativeElement.offsetLeft\r\n    };\r\n    this._calculPositions();\r\n  }\r\n\r\n  public refreshWidgets(): void {\r\n    this._calculPositions();\r\n  }\r\n\r\n  public enableDrag(): void {\r\n    this.dragEnable = true;\r\n    this._renderer.removeClass(this._ngEl.nativeElement, 'disabled');\r\n  }\r\n\r\n  public disableDrag(): void {\r\n    this.dragEnable = false;\r\n    this._renderer.addClass(this._ngEl.nativeElement, 'disabled');\r\n  }\r\n\r\n  public addItem<T extends WidgetComponent>(ngItem: Type<T>): T {\r\n    let factory = this._componentFactoryResolver.resolveComponentFactory(ngItem);\r\n    const ref = this._viewCntRef.createComponent(factory);\r\n    const newItem: T = ref.instance;\r\n    newItem.setEventListener(this._onMouseDown.bind(this));\r\n    newItem.onSizeChanged.subscribe(() => this._calculPositions());\r\n    this._elements.push(ref);\r\n    this._calculPositions();\r\n    return newItem;\r\n  }\r\n\r\n  public clearItems(): void {\r\n    this._viewCntRef.clear();\r\n    this._elements = [];\r\n  }\r\n\r\n  public getWidgetById(widgetId: string): WidgetComponent {\r\n    let element;\r\n    for (let i = 0; i < this._elements.length; i++) {\r\n      element = this._elements[i].instance;\r\n      if (widgetId == element.widgetId) {\r\n        break;\r\n      }\r\n    }\r\n    return element;\r\n  }\r\n\r\n  public removeItem(ngItem: WidgetComponent): void {\r\n    let element;\r\n    for (let i = 0; i < this._elements.length; i++) {\r\n      element = this._elements[i];\r\n      if (element.instance.widgetId == ngItem.widgetId) {\r\n        break;\r\n      }\r\n    }\r\n    this._removeElement(element);\r\n  }\r\n\r\n  public removeItemByIndex(index: number): void {\r\n    let element;\r\n    for (let i = 0; i < this._elements.length; i++) {\r\n      const widget = this._elements[i];\r\n      if (i === index) {\r\n        element = widget;\r\n        break;\r\n      }\r\n    }\r\n    if (element) {\r\n      this._removeElement(element);\r\n    }\r\n  }\r\n\r\n  public removeItemById(id: string): void {\r\n    let element;\r\n    for (let i = 0; i < this._elements.length; i++) {\r\n      const widget = this._elements[i];\r\n      if (widget.instance.widgetId == id) {\r\n        element = widget;\r\n        break;\r\n      }\r\n    }\r\n    if (element) {\r\n      this._removeElement(element);\r\n    }\r\n\r\n  }\r\n\r\n  private _removeElement(widget: ComponentRef<WidgetComponent>): void {\r\n    if (!widget) return;\r\n    this._enableAnimation();\r\n    const index = widget.hostView == null ? -1 : this._viewCntRef.indexOf(widget.hostView);\r\n    if (index == -1) {\r\n      widget.instance.removeFromParent();\r\n    }\r\n    else {\r\n      this._viewCntRef.remove(index);\r\n    }\r\n    this._elements = this._elements.filter((item, i) => item !== widget);\r\n    this._calculPositions();\r\n    this._disableAnimation();\r\n  }\r\n\r\n  private _calculPositions(): void {\r\n    const lines = [];\r\n    for (let i = 0; i < this._nbColumn; i++) {\r\n      lines[i] = 0;\r\n    }\r\n    this._positionWidget(lines, this._elements, 0, 0, 0)\r\n  }\r\n\r\n  private _positionWidget(lines: number[], items: ComponentRef<WidgetComponent>[], index: number, column: number, row: number): void {\r\n    if (!items[index]) {\r\n      let remainingHeight = 0;\r\n      for (let i = 0; i < lines.length; i++) {\r\n        if (remainingHeight < lines[i]) {\r\n          remainingHeight = lines[i];\r\n        }\r\n        lines[i]--;\r\n      }\r\n      if (remainingHeight > 0) {\r\n        this._positionWidget(lines, items, index, column, row + 1);\r\n      }\r\n      else {\r\n        const height = row * this.widgetsSize[1] + row * this.margin;\r\n        this._renderer.setStyle(this._ngEl.nativeElement, 'height', height + 'px');\r\n      }\r\n      return;\r\n    }\r\n\r\n    const item = items[index].instance;\r\n\r\n    let itemWidth = item.size[0]\r\n    if (itemWidth > this._nbColumn) {\r\n      itemWidth = this._nbColumn;\r\n    }\r\n\r\n    item.width = this.widgetsSize[0] * itemWidth + ( itemWidth - 1 ) * this.margin;\r\n    item.height = this.widgetsSize[1] * item.size[1] + ( item.size[1] - 1 ) * this.margin;\r\n\r\n    let haveEnoughSpace = column + itemWidth - 1 <= this._nbColumn;\r\n    while (lines[column] > 0 || !haveEnoughSpace) {\r\n      column++;\r\n      haveEnoughSpace = column + itemWidth - 1 <= this._nbColumn;\r\n\r\n      if (column >= this._nbColumn) {\r\n        column = 0;\r\n        for (let i = 0; i < lines.length; i++) {\r\n          lines[i]--;\r\n        }\r\n        row++;\r\n        haveEnoughSpace = column + itemWidth - 1 <= this._nbColumn;\r\n      }\r\n\r\n      if (!haveEnoughSpace) continue;\r\n      for (let i = 1; i < itemWidth; i++) {\r\n        haveEnoughSpace = lines[column + i] <= 0;\r\n        if (!haveEnoughSpace) break;\r\n      }\r\n    }\r\n\r\n    const left = column * this.widgetsSize[0] + column * this.margin + this.margin / 2;\r\n    const top = row * this.widgetsSize[1] + row * this.margin + this.margin / 2;\r\n\r\n    lines[column] = item.size[1];\r\n    for (let i = 1; i < itemWidth; i++) {\r\n      lines[column + i] = item.size[1];\r\n    }\r\n\r\n    item.setPosition(top, left);\r\n    this._positionWidget(lines, items, index + 1, column, row);\r\n  }\r\n\r\n  private _calculSizeAndColumn(): void {\r\n    this._width = this._ngEl.nativeElement.offsetWidth;\r\n    this._nbColumn = Math.floor(this._width / ( this.widgetsSize[0] + this.margin ));\r\n  }\r\n\r\n  private _onResize(e: any): void {\r\n    this._calculSizeAndColumn();\r\n    this._calculPositions();\r\n  }\r\n\r\n  private _onMouseDown(e: any, widget: WidgetComponent): boolean {\r\n    this._isDragging = this.dragEnable && e.target === widget.handle;\r\n    if (this._isDragging) {\r\n      this.onDragStart.emit(widget);\r\n      widget.addClass('active');\r\n      this._currentElement = widget;\r\n      this._offset = this._getOffsetFromTarget(e);\r\n      this._enableAnimation();\r\n      this._lastOrder = this.order;\r\n\r\n      if (this._isTouchEvent(e)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n      this._currentMouseEvent = e;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public get order(): Array<string> {\r\n    return this._elements.map(elt => elt.instance.widgetId);\r\n  }\r\n\r\n  private _onMouseMove(e: any): boolean {\r\n    if (this._isDragging) {\r\n      //scroll while drag\r\n      if (this._isTouchEvent(e))\r\n        e = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n      let _pageY = e.clientY;\r\n      const y = _pageY;\r\n      const container = document.body;\r\n      const containerTop = container.offsetTop;\r\n\r\n      if (window.innerHeight - y < 80) {\r\n        this._isScrolling = true;\r\n        this._scrollDown(container, y, e);\r\n      } else if (containerTop + y < 80) {\r\n        this._isScrolling = true;\r\n        this._scrollUp(container, y, e);\r\n      } else {\r\n        this._isScrolling = false;\r\n      }\r\n      this.onDrag.emit(this._currentElement);\r\n      const pos = this._getMousePosition(e);\r\n\r\n      let left = pos.left - this._offset.left;\r\n      let top = pos.top - this._offset.top;\r\n\r\n      if (Math.abs(pos.top - this._previousPosition.top) > this.THRESHOLD\r\n        || Math.abs(pos.left - this._previousPosition.left) > this.THRESHOLD) {\r\n        this._elements.sort(this._compare);\r\n\r\n        this._calculPositions();\r\n        this._previousPosition = pos;\r\n      }\r\n      this._currentElement.setPosition(top, left);\r\n      if (this._isTouchEvent(e)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n      this._currentMouseEvent = e;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private _scrollDown(container: any, pageY: number, e: any): boolean {\r\n    if (this._isDragging && container.scrollTop < ( this._ngEl.nativeElement.offsetHeight - window.innerHeight + this._currentElement.height ) && this._isScrolling) {\r\n      container.scrollTop += DashboardComponent.SCROLL_STEP;\r\n      this._scrollChange = DashboardComponent.SCROLL_STEP;\r\n      setTimeout(this._scrollDown.bind(this, container, pageY, e), DashboardComponent.SCROLL_DELAY);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private _scrollUp(container: any, pageY: number, e: any): boolean {\r\n    if (this._isDragging && container.scrollTop != 0 && this._isScrolling) {\r\n      container.scrollTop -= DashboardComponent.SCROLL_STEP;\r\n      this._scrollChange = -DashboardComponent.SCROLL_STEP;\r\n      setTimeout(this._scrollUp.bind(this, container, pageY, e), DashboardComponent.SCROLL_DELAY);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private _onScroll(e: any): boolean {\r\n    if (this._isDragging) {\r\n      let refPos = this._ngEl.nativeElement.getBoundingClientRect();\r\n      let left;\r\n      let top;\r\n      left = this._currentMouseEvent.clientX - refPos.left;\r\n      top = this._currentMouseEvent.clientY - refPos.top;\r\n      this.onDrag.emit(this._currentElement);\r\n      left = left - this._offset.left;\r\n      let top_1 = top - this._offset.top + this._scrollChange;\r\n      if (Math.abs(top - this._previousPosition.top) > this.THRESHOLD\r\n        || Math.abs(left - this._previousPosition.left) > this.THRESHOLD) {\r\n        this._elements.sort(this._compare);\r\n        this._calculPositions();\r\n        //  this._previousPosition = pos;\r\n\r\n      }\r\n      this._currentElement.setPosition(top_1, left);\r\n\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private _onMouseUp(e: any): boolean {\r\n    if (this._isDragging) {\r\n      this._isDragging = false;\r\n      this._isScrolling = false;\r\n      if (this._currentElement) {\r\n        this.onDragEnd.emit(this._currentElement);\r\n        this._currentElement.removeClass('active');\r\n        this._currentElement.addClass('animate');\r\n      }\r\n      this._currentElement = null;\r\n      this._offset = null;\r\n      this._calculPositions();\r\n      this._disableAnimation();\r\n      if (this._isTouchEvent(e)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n      const currentOrder = this.order;\r\n\r\n      const isOrderChanged = JSON.stringify(this._lastOrder) != JSON.stringify(currentOrder);\r\n\r\n      if (isOrderChanged) {\r\n        this.onOrderChange.emit(this.order);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private _manageEvent(e: any): any {\r\n    if (this._isTouchEvent(e)) {\r\n      e = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n    }\r\n    return e;\r\n  }\r\n\r\n  private _isTouchEvent(e: any): any {\r\n    return ( ( <any>window ).TouchEvent && e instanceof TouchEvent ) || ( e.touches || e.changedTouches );\r\n  }\r\n\r\n  private _getOffsetFromTarget(e: any) {\r\n    let x;\r\n    let y;\r\n    let scrollOffset = 0;\r\n    if (this._isTouchEvent(e)) {\r\n      e = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n      const rect = e.target.getBoundingClientRect();\r\n      x = e.pageX - rect.left;\r\n      y = e.pageY - rect.top;\r\n      scrollOffset = ( <any>document ).body.scrollTop;\r\n    }\r\n    else {\r\n      x = e.offsetX || e.offsetLeft;\r\n      y = e.offsetY || e.offsetTop;\r\n    }\r\n\r\n    return {top: y - scrollOffset, left: x};\r\n  }\r\n\r\n  private _getMousePosition(e: any): any {\r\n    e = this._manageEvent(e);\r\n    const refPos: any = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n    let left: number = e.clientX - refPos.left;\r\n    let top: number = e.clientY - refPos.top;\r\n    return {\r\n      left: left,\r\n      top: top\r\n    };\r\n  }\r\n\r\n  private _compare(widget1: ComponentRef<WidgetComponent>, widget2: ComponentRef<WidgetComponent>): number {\r\n    if (widget1.instance.offset.top > widget2.instance.offset.top + widget2.instance.height / 2) {\r\n      return +1;\r\n    }\r\n    if (widget2.instance.offset.top > widget1.instance.offset.top + widget1.instance.height / 2) {\r\n      return -1;\r\n    }\r\n    if (( widget1.instance.offset.left + ( widget1.instance.width / 2 ) ) > ( widget2.instance.offset.left + ( widget2.instance.width / 2 ) )) {\r\n      return +1;\r\n    }\r\n    if (( widget2.instance.offset.left + ( widget2.instance.width / 2 ) ) > ( widget1.instance.offset.left + ( widget1.instance.width / 2 ) )) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  private _enableAnimation(): void {\r\n    this._elements.forEach(item => {\r\n      if (item.instance != this._currentElement) {\r\n        item.instance.addClass('animate');\r\n      }\r\n    });\r\n  }\r\n\r\n  private _disableAnimation(): void {\r\n    setTimeout(() => {\r\n      this._elements.forEach(item => {\r\n        item.instance.removeClass('animate');\r\n      });\r\n    }, 400);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../src/components/dashboard/dashboard.component.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 129;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 129\n// module chunks = 0","import './polyfills.ts';\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { environment } from './environments/environment';\nimport { AppModule } from './app/';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {BrowserModule} from \"@angular/platform-browser\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule} from \"@angular/forms\";\nimport {HttpModule} from \"@angular/http\";\nimport {NgDashboardModule} from \"../dist\";\nimport {AppComponent} from \"./app.component\";\nimport {MyWidgetComponent} from \"./my-widget/my-widget.component\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MyWidgetComponent\n  ],\n  entryComponents: [\n    MyWidgetComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    NgDashboardModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export * from './app.component';\nexport * from './app.module';\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/index.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","// This file includes polyfills needed by Angular 2 and is loaded before\n// the app. You can add your own extra polyfills to this file.\nimport 'core-js/es6/symbol';\nimport 'core-js/es6/object';\nimport 'core-js/es6/function';\nimport 'core-js/es6/parse-int';\nimport 'core-js/es6/parse-float';\nimport 'core-js/es6/number';\nimport 'core-js/es6/math';\nimport 'core-js/es6/string';\nimport 'core-js/es6/date';\nimport 'core-js/es6/array';\nimport 'core-js/es6/regexp';\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport 'core-js/es6/reflect';\n\nimport 'core-js/es7/reflect';\nimport 'zone.js/dist/zone';\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".dashboard {\\n  width: 100%;\\n  overflow: hidden;\\n  background: whitesmoke;\\n}\\n\\n.dashboard /deep/ .widget {\\n  background-color: darkgrey;\\n}\\n\\n.widget .close {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n  cursor: pointer;\\n}\\n\\n.handle {\\n  cursor: move;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 291\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/my-widget/my-widget.component.css\n// module id = 292\n// module chunks = 0","module.exports = \"<h1>\\n  {{title}}\\n</h1>\\n<button (click)=\\\"addWidget()\\\">Add widget</button>\\n<br><br>\\n<dashboard (onOrderChange)=\\\"logOrder($event)\\\" (onDragStart)=\\\"log($event, 'ondragstart')\\\"\\n           (onDragEnd)=\\\"log($event, 'ondragend')\\\"\\n           (onDrag)=\\\"log($event, 'ondragmove')\\\" class=\\\"dashboard\\\" [widgetsSize]=\\\"widgetsSize\\\"\\n           [margin]=\\\"dashboardMargin\\\">\\n\\n  <widget [size]=\\\"[2, 2]\\\" widgetId=\\\"big\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Big widget [2, 2]</div>\\n  </widget>\\n  <!--widget [size]=\\\"[1, 1]\\\" widgetId=\\\"small\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget>\\n  <widget [size]=\\\"[1, 1]\\\" widgetId=\\\"small2\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget>\\n  <!--widget [size]=\\\"[1, 1]\\\" widgetId=\\\"small3\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget>\\n\\n  <widget [size]=\\\"[2, 3]\\\" widgetId=\\\"big2\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Big widget [2, 3]</div>\\n  </widget>\\n  <widget [size]=\\\"[1, 1]\\\" widgetId=\\\"small4\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget>\\n  <widget [size]=\\\"[1, 1]\\\" widgetId=\\\"small5\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget-->\\n\\n  <widget [size]=\\\"[2, 3]\\\" widgetId=\\\"large\\\">\\n    <div widgetHandle class=\\\"head handle\\\">Large widget [2, 1] handle only on text</div>\\n  </widget>\\n  <widget [size]=\\\"[1, 2]\\\" widgetId=\\\"tall\\\">\\n    <div widgetHandle class=\\\"head handle\\\">Tall widget [1, 2] handle only on text</div>\\n  </widget>\\n  <widget widgetId=\\\"small\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Small widget [1, 1]</div>\\n  </widget>\\n  <widget [size]=\\\"[2, 2]\\\" widgetId=\\\"big\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Big widget [2, 2]</div>\\n  </widget>\\n  <widget *ngFor=\\\"let item of [1, 2, 3, 4, 5, 6]; let i = index;\\\" [widgetId]=\\\"i\\\" class=\\\"handle\\\">\\n    <div class=\\\"head\\\">Widget {{i}} [1, 1]</div>\\n    <div class=\\\"close\\\" (click)=\\\"close($event, i)\\\">X</div>\\n  </widget>\\n\\n</dashboard>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 294\n// module chunks = 0","module.exports = \"<div widgetHandle>DRAG ME</div>\\n\\n<p>\\n  my custom widget <b>works</b>!\\n</p>\\n<ng-content></ng-content>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/my-widget/my-widget.component.html\n// module id = 295\n// module chunks = 0","import {NgModule} from \"@angular/core\";\nimport {DashboardComponent} from \"./dashboard/dashboard.component\";\nimport {WidgetComponent} from \"./widget/widget.component\";\nimport {WidgetHandleDirective} from \"../directives/widget-handle.directive\";\n\n@NgModule({\n  declarations: [\n    DashboardComponent,\n    WidgetComponent,\n    WidgetHandleDirective\n  ],\n  exports: [\n    DashboardComponent,\n    WidgetComponent,\n    WidgetHandleDirective\n  ],\n  providers: []\n})\nexport class NgDashboardModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/components/index.ts","import {Component, ContentChild, ElementRef, EventEmitter, Input, OnInit, Output, Renderer2} from \"@angular/core\";\nimport {WidgetHandleDirective} from \"../../directives/widget-handle.directive\";\n\n@Component({\n  selector: 'widget',\n  template: '<ng-content></ng-content>'\n})\nexport class WidgetComponent implements OnInit {\n  @Input() public size: number[] = [1, 1];\n  @Input() public widgetId: string;\n  @Output() onSizeChanged: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @ContentChild(WidgetHandleDirective) protected _handle: WidgetHandleDirective;\n\n  constructor(protected _ngEl: ElementRef,\n              protected _renderer: Renderer2) {\n  }\n\n  ngOnInit(): void {\n    this._renderer.addClass(this._ngEl.nativeElement, 'widget');\n  }\n\n  setSize(size: number[]): void {\n    this.size = size;\n    this.onSizeChanged.emit(this.size);\n  }\n\n  public get element(): any {\n    return this._ngEl.nativeElement;\n  }\n\n  public get offset(): any {\n    return this._ngEl.nativeElement.getBoundingClientRect();\n  }\n\n  public get width(): number {\n    return this._ngEl.nativeElement.offsetWidth;\n  }\n\n  public get height(): number {\n    return this._ngEl.nativeElement.offsetHeight;\n  }\n\n  public set height(height) {\n    this._renderer.setStyle(this._ngEl.nativeElement, 'height', height + 'px');\n  }\n\n  public set width(width) {\n    this._renderer.setStyle(this._ngEl.nativeElement, 'width', width + 'px');\n  }\n\n  public setPosition(top: number, left: number): void {\n    this._renderer.setStyle(this._ngEl.nativeElement, 'top', top + 'px');\n    this._renderer.setStyle(this._ngEl.nativeElement, 'left', left + 'px');\n  }\n\n  public setEventListener(cbMouse: Function): void {\n    if (this._handle) {\n      this._renderer.listen(this._handle.element, 'mousedown', (e: any) => cbMouse(e, this));\n      this._renderer.listen(this._handle.element, 'touchstart', (e: any) => cbMouse(e, this));\n    }\n    else {\n      this._renderer.listen(this._ngEl.nativeElement, 'mousedown', (e: any) => cbMouse(e, this));\n      this._renderer.listen(this._ngEl.nativeElement, 'touchstart', (e: any) => cbMouse(e, this));\n    }\n  }\n\n  addClass(myClass: string): void {\n    this._renderer.addClass(this._ngEl.nativeElement, myClass);\n  }\n\n  removeClass(myClass: string): void {\n    this._renderer.removeClass(this._ngEl.nativeElement, myClass);\n  }\n\n  get handle(): any {\n    return this._handle ? this._handle.element : this.element;\n  }\n\n  removeFromParent() {\n    this._ngEl.nativeElement.remove();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/components/widget/widget.component.ts","import {Directive, ElementRef} from \"@angular/core\";\n\n@Directive({\n  selector: '[widgetHandle]',\n  exportAs: 'widgetHandle'\n})\nexport class WidgetHandleDirective {\n\n  constructor(private _ngEl: ElementRef) {\n  }\n\n  get element() {\n    return this._ngEl.nativeElement;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../src/directives/widget-handle.directive.ts","export * from \"./components/index\"\nexport * from './components/widget/widget.component'\nexport * from './components/dashboard/dashboard.component'\nexport * from './directives/widget-handle.directive'\n\n\n\n// WEBPACK FOOTER //\n// ../src/index.ts","import {Component, OnInit, ViewChild} from \"@angular/core\";\nimport {DashboardComponent, WidgetComponent} from \"../dist\";\nimport {MyWidgetComponent} from \"./my-widget/my-widget.component\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  host: {\n    '(window:resize)': '_onResize($event)',\n  }\n})\nexport class AppComponent implements OnInit {\n  title = 'app works!';\n  @ViewChild(DashboardComponent) dashboard: DashboardComponent;\n  widgetsSize: number[] = [300, 150];\n  dashboardMargin: number = 20;\n\n  constructor() {\n\n  }\n\n  ngOnInit(): void {\n    this._onResize(null)\n  }\n\n  private _onResize(event: any) {\n    if (window.innerWidth < 750) {\n      this.dashboardMargin = 10;\n      this.widgetsSize = [this.dashboard.width / 2 - this.dashboardMargin, this.widgetsSize[1]];\n    }\n    else {\n      this.dashboardMargin = 20;\n      const nbColumn = Math.floor(this.dashboard.width / (300 + this.dashboardMargin));\n      this.widgetsSize = [this.dashboard.width / nbColumn - this.dashboardMargin, this.widgetsSize[1]];\n    }\n  }\n\n  log(widget: WidgetComponent, type: string) {\n    console.log(widget, type);\n  }\n\n  logOrder(order: Array<string>) {\n    console.log(order, 'orderchange');\n  }\n\n  addWidget() {\n    const ref: MyWidgetComponent = this.dashboard.addItem(MyWidgetComponent);\n    ref.widgetId = Math.random() + '';\n  }\n\n  close(e: any, id: string) {\n    this.dashboard.removeItemById(id);\n    e.preventDefault();\n    e.stopPropagation();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Component, Renderer2, ElementRef, forwardRef, Input, ViewChild} from \"@angular/core\";\nimport {WidgetHandleDirective, WidgetComponent} from \"../../dist\";\n\nconst forwardReference = forwardRef(() => MyWidgetComponent);\n\n@Component({\n  selector: 'app-my-widget',\n  templateUrl: './my-widget.component.html',\n  styleUrls: ['./my-widget.component.css'],\n  providers: [{provide: WidgetComponent, useExisting: forwardReference}]\n})\nexport class MyWidgetComponent extends WidgetComponent {\n  @Input() public size: number[] = [1, 1];\n  @Input() public widgetId: string;\n  @ViewChild(WidgetHandleDirective) protected _handle: WidgetHandleDirective;\n\n  constructor(ngEl: ElementRef, renderer: Renderer2) {\n    super(ngEl, renderer);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/my-widget/my-widget.component.ts"],"sourceRoot":""}